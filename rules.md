# CURSOR RULES ‚Äî ALDERSON WEBSITE PROJECT (MAX VERSION)

**–í–ê–ñ–ù–û:** –≠—Ç–æ—Ç —Ñ–∞–π–ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–∏—Ç–∞–µ—Ç—Å—è Cursor –ø–µ—Ä–µ–¥ –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–µ–π.  
Cursor –¥–æ–ª–∂–µ–Ω —Å—Ç—Ä–æ–≥–æ —Å–æ–±–ª—é–¥–∞—Ç—å –≤—Å–µ —É–∫–∞–∑–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞.

---

## üéØ –û–°–ù–û–í–ù–´–ï –ü–†–ò–ù–¶–ò–ü–´

1. **–ù–∏–∫–∞–∫–∏—Ö –≤—ã–¥—É–º–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, API, –º–æ–¥—É–ª–µ–π, –±–∏–±–ª–∏–æ—Ç–µ–∫.**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–µ API FastAPI, SQLAlchemy, Angular, TypeScript –∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã Web.
   - –ï—Å–ª–∏ –Ω–µ —É–≤–µ—Ä–µ–Ω ‚Äî –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å 2‚Äì3 –≤–∞—Ä–∏–∞–Ω—Ç–∞ —Ä–µ—à–µ–Ω–∏—è —Å —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é.

2. **–í—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫—É –∫–æ–¥–∞:**
   - –°–∏–Ω—Ç–∞–∫—Å–∏—Å
   - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –∏–º–ø–æ—Ä—Ç–æ–≤ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   - –†–µ–∞–ª—å–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–π/API
   - –¢–∏–ø–∏–∑–∞—Ü–∏—è (Python type hints / TypeScript strict)
   - Edge cases
   - –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (XSS, CSRF, SQLi)
   - –†–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å

3. **Production-ready –ø–æ–¥—Ö–æ–¥**
   - –ö–æ–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É –∏–ª–∏ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—Ç—å—Å—è —á—ë—Ç–∫–∏–º –ø–ª–∞–Ω–æ–º –º–∏–≥—Ä–∞—Ü–∏–∏
   - ‚ùå –ù–∏–∫–∞–∫–∏—Ö –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–æ—Å—Ç—ã–ª–µ–π, ¬´–ø–æ—Ç–æ–º –∏—Å–ø—Ä–∞–≤–∏–º¬ª –∏–ª–∏ –Ω–µ–¥–æ–¥–µ–ª–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

4. **Anti-Hallucination Mode**
   - –ù–∏–∫–∞–∫–∏—Ö –ø—Ä–∏–¥—É–º–∞–Ω—ã—Ö API –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–π
   - –í—Å–µ –Ω–µ—Ç—Ä–∏–≤–∏–∞–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è ‚Äî —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –∏–ª–∏ —Å—Å—ã–ª–æ–∫ –Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

---

## üîí BACKEND (FastAPI + SQLAlchemy)

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞)

```
routers/ ‚Üí thin controllers (—Ç–æ–ª—å–∫–æ –≤—ã–∑–æ–≤—ã —Å–µ—Ä–≤–∏—Å–æ–≤)
services/ ‚Üí –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
repositories/ ‚Üí –¥–æ—Å—Ç—É–ø –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
schemas/ ‚Üí Pydantic –º–æ–¥–µ–ª–∏ (request/response)
models/ ‚Üí SQLAlchemy –º–æ–¥–µ–ª–∏
core/ ‚Üí –∫–æ–Ω—Ñ–∏–≥–∏, utils, exceptions, security
migrations/ ‚Üí Alembic
```

### –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å
- –ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å async-first: AsyncEngine + async_session
- –°–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –∫–æ–¥ –¥–æ–ª–∂–µ–Ω –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ BackgroundTasks –∏–ª–∏ worker
- –ó–∞–ø—Ä–µ—â–µ–Ω–æ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å event loop

### JWT Security
- Access token: 5‚Äì15 –º–∏–Ω—É—Ç –∂–∏–∑–Ω–∏, —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏
- Refresh token: HttpOnly, Secure, SameSite cookie; –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞ —Ä–æ—Ç–∞—Ü–∏—è
- ‚ùå –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å —Ç–æ–∫–µ–Ω—ã –≤ localStorage
- –•—Ä–∞–Ω–µ–Ω–∏–µ refresh-—Ç–æ–∫–µ–Ω–æ–≤ –≤ –ë–î –∏–ª–∏ Redis: id, user_id, device_info, issued_at, revoked_at
- `/auth/refresh` endpoint ‚Äî rotation + –Ω–æ–≤—ã–π access token
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥–æ–≤/–≤—ã—Ö–æ–¥–æ–≤ –∏ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π

### CSRF –∏ cookie
- –ï—Å–ª–∏ cookie –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ‚Äî double-submit CSRF –∏–ª–∏ Anti-CSRF header
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å flow

### CORS
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `*` –≤ –ø—Ä–æ–¥–µ
- –£–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã–µ origin'—ã

### Rate limiting
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ endpoints: login, reset password
- –•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ Redis –∏–ª–∏ in-memory limiter

### –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ MIME-type, —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π, magic bytes
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 10MB)
- –°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –≤–∏—Ä—É—Å—ã
- –•—Ä–∞–Ω–µ–Ω–∏–µ –≤–Ω–µ /static, –æ—Ç–¥–∞—á–∞ —á–µ—Ä–µ–∑ Nginx/X-Accel-Redirect –∏–ª–∏ CDN

### –ú–∏–≥—Ä–∞—Ü–∏–∏
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ë–î —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ Alembic
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `metadata.create_all` –≤ –ø—Ä–æ–¥–µ

### –õ–æ–≥–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- JSON-–ª–æ–≥–∏
- –û—à–∏–±–∫–∏ ‚Üí Sentry
- –ú–µ—Ç—Ä–∏–∫–∏ ‚Üí Prometheus (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

---

## üé® FRONTEND (Angular 16+)

### TypeScript / —Å–±–æ—Ä–∫–∞
- strict: true
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å any –±–µ–∑ –∫—Ä–∞–π–Ω–µ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
- ESLint + Prettier, production build (`ng build --configuration production`)

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- Access token: –ø–∞–º—è—Ç—å
- Refresh token: HttpOnly cookie
- HttpInterceptor:
  - –¥–æ–±–∞–≤–ª—è–µ—Ç access token –≤ Authorization header
  - –ø—Ä–∏ 401 –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç refresh –∏ –ø–æ–≤—Ç–æ—Ä –∑–∞–ø—Ä–æ—Å–∞
  - –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö refresh'–µ–π

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–ª–∏–µ–Ω—Ç–∞
- Lazy loading –¥–ª—è /admin –∏ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –º–æ–¥—É–ª—è
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã ‚Äî UI-only
- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ ‚Äî —Å–µ—Ä–≤–∏—Å—ã
- ReactiveForms –¥–ª—è –≤—Å–µ—Ö —Ñ–æ—Ä–º
- ErrorInterceptor –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ API
- PWA: offline cache, SW –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è, versioning

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- CSP –∏ security headers –Ω–∞ Nginx
- –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚ùå –ù–∏–∫–∞–∫–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª–∏

---

## üóÑÔ∏è DATABASE

- PostgreSQL –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞; SQLite —Ç–æ–ª—å–∫–æ –¥–ª—è dev/test
- SQLAlchemy 2.0 async style preferred
- –û–±—Ä–∞–±–æ—Ç–∫–∞ IntegrityError, UniqueViolation
- –ë—ç–∫–∞–ø—ã + —Ç–µ—Å—Ç –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è
- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø–æ–ª–µ–π –ø–æ–∏—Å–∫–∞
- ‚ùå Raw SQL –±–µ–∑ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏—è

---

## üöÄ DEVOPS / NGINX / SYSTEMD

- HTTPS/TLS + HSTS
- gzip/brotli
- Cache-control: long-lived immutable –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤, –∫–æ—Ä–æ—Ç–∫–∏–π –¥–ª—è index.html
- Systemd unit / Gunicorn + Uvicorn
- Health-check endpoints: /health, /ready
- Security headers: CSP, X-Frame-Options, X-Content-Type-Options, Referrer-Policy
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞
- WAF / Rate-limit –Ω–∞ edge (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ + —Ä–æ—Ç–∞—Ü–∏—è

---

## üìù –ü–†–û–¶–ï–°–° –†–ê–ó–†–ê–ë–û–¢–ö–ò

1. PLANNING: –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, dependencies, –º–∏–≥—Ä–∞—Ü–∏–∏
2. EXECUTION: —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è, unit/integration tests, CI checks
3. VERIFICATION: –ª–∏–Ω—Ç–µ—Ä—ã, —Ç–∏–ø–∏–∑–∞—Ü–∏—è, security scan, —Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

---

## ‚ö†Ô∏è –¢–ï–ö–£–©–ò–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1:**
1. Refresh token ‚Üí HttpOnly cookie
2. CSRF –∑–∞—â–∏—Ç–∞
3. HTTPS/TLS + HSTS
4. Rate limiting
5. PostgreSQL –≤–º–µ—Å—Ç–æ SQLite

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2:**
6. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏ (routers/services/repositories)
7. –ú–∏–≥—Ä–∞—Ü–∏–∏ Alembic
8. –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏
9. CSP + –æ—Å—Ç–∞–ª—å–Ω—ã–µ security headers

---

## üîß –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ü–†–ê–í–ò–õ–ê

- –ö–æ–¥ –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–π—Ç–∏ —Å–∞–º–æ–ø—Ä–æ–≤–µ—Ä–∫—É –ø–µ—Ä–µ–¥ –≤—ã–¥–∞—á–µ–π
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- –ù–∏–∫–∞–∫–∏—Ö TODO –±–µ–∑ —É—Ç–æ—á–Ω–µ–Ω–∏—è
- –í—Å–µ —Ä–µ—à–µ–Ω–∏—è –¥–æ–ª–∂–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º senior-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞
- –ï—Å–ª–∏ –∑–∞–¥–∞—á–∞ –Ω–µ–ø–æ–ª–Ω–∞—è ‚Äî –∑–∞–ø—Ä–æ—Å–∏—Ç—å —É—Ç–æ—á–Ω–µ–Ω–∏–µ
- Edge cases –∏ –æ—à–∏–±–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã
- –õ—é–±—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –¥–æ–ª–∂–Ω—ã –ª–æ–º–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

---

## üìö –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø

- PRODUCTION_STANDARDS.md ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –∫–æ–¥–∞ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- CODE_REVIEW_ISSUES.md ‚Äî —Ç–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –ø–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
- DEVELOPMENT_RULES.md ‚Äî git workflow, –∫–æ–º–º–∏—Ç—ã, –≤–µ—Ç–≤–ª–µ–Ω–∏–µ

---

## ‚úÖ –§–ò–ù–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê

–ü–µ—Ä–µ–¥ –≤—ã–¥–∞—á–µ–π —Ä–µ—à–µ–Ω–∏—è Cursor –æ–±—è–∑–∞–Ω —É–±–µ–¥–∏—Ç—å—Å—è:

- [ ] –°–∏–Ω—Ç–∞–∫—Å–∏—Å –∏ —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- [ ] –ò–º–ø–æ—Ä—Ç—ã –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã
- [ ] –ù–µ—Ç –≤—ã–¥—É–º–∞–Ω–Ω—ã—Ö API
- [ ] –ö–æ–¥ production-ready
- [ ] Edge cases –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã
- [ ] –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ security —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º
- [ ] –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –ª–æ–º–∞—é—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É

**–í–ê–ñ–ù–û:** –í—Å–µ–≥–¥–∞ —Å–ª–µ–¥–æ–≤–∞—Ç—å —ç—Ç–∏–º –ø—Ä–∞–≤–∏–ª–∞–º. –ò—Å–∫–ª—é—á–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è.

---

## üö´ –ö–†–ò–¢–ò–ß–ï–°–ö–û–ï –ü–†–ê–í–ò–õ–û

**–ù–ò–ö–û–ì–î–ê –ù–ï –£–î–ê–õ–Ø–¢–¨ –§–ê–ô–õ `cursor/rules.md`**

–≠—Ç–æ—Ç —Ñ–∞–π–ª —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–æ–π –¥–ª—è —Ä–∞–±–æ—Ç—ã Cursor –∏ –¥–æ–ª–∂–µ–Ω –≤—Å–µ–≥–¥–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –ø—Ä–æ–µ–∫—Ç–µ.

