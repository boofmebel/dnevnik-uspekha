# üîí –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –ø–æ QR-–∫–æ–¥—É –¥–ª—è –¥–µ—Ç–µ–π

## –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

–°–µ–π—á–∞—Å QR-–∫–æ–¥ –∏–º–µ–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
- ‚úÖ –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è: 30 –¥–Ω–µ–π (`qr_token_expires_at`)
- ‚úÖ –§–ª–∞–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏: –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å (`is_active`)
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –±—Ä—É—Ç—Ñ–æ—Ä—Å–∞: `failed_attempts` –∏ `locked_until`

## –ü—Ä–µ–¥–ª–∞–≥–∞–µ–º—ã–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞ QR-—Ç–æ–∫–µ–Ω —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É–∫—Ä–∞–¥–µ–Ω–Ω–æ–≥–æ QR-–∫–æ–¥–∞
- –ü—Ä–æ—Å—Ç–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- –ù—É–∂–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π QR-–∫–æ–¥ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –≤—Ö–æ–¥–∞
- –ú–µ–Ω–µ–µ —É–¥–æ–±–Ω–æ –¥–ª—è —á–∞—Å—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `qr_token_used_at` –≤ `ChildAccess`
- –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å `qr_token_used_at = now()`
- –ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ç–æ–∫–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ `qr_token_used_at IS NULL`

---

### –í–∞—Ä–∏–∞–Ω—Ç 2: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π
**–û–ø–∏—Å–∞–Ω–∏–µ**: QR-—Ç–æ–∫–µ–Ω –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–∞–∫—Å–∏–º—É–º N —Ä–∞–∑ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 5 —Ä–∞–∑).

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –£–¥–æ–±–Ω–æ –¥–ª—è –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- –ö–æ–Ω—Ç—Ä–æ–ª—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤—Ö–æ–¥–æ–≤
- –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ª–∏–º–∏—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- –ù—É–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π
- –°–ª–æ–∂–Ω–µ–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è `max_uses` –∏ `current_uses` –≤ `ChildAccess`
- –ü—Ä–∏ –∫–∞–∂–¥–æ–º –≤—Ö–æ–¥–µ —É–≤–µ–ª–∏—á–∏–≤–∞—Ç—å `current_uses`
- –ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ç–æ–∫–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å `current_uses < max_uses`

---

### –í–∞—Ä–∏–∞–Ω—Ç 3: –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
**–û–ø–∏—Å–∞–Ω–∏–µ**: QR-–∫–æ–¥ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —á–∞—Å—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å 8:00 –¥–æ 20:00).

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ö–æ–Ω—Ç—Ä–æ–ª—å –≤—Ä–µ–º–µ–Ω–∏ –¥–æ—Å—Ç—É–ø–∞
- –ú–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–±–µ–Ω–∫–∞
- –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- –ù—É–∂–Ω–æ —É—á–∏—Ç—ã–≤–∞—Ç—å —á–∞—Å–æ–≤–æ–π –ø–æ—è—Å
- –ú–µ–Ω–µ–µ –≥–∏–±–∫–æ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è `allowed_start_time` –∏ `allowed_end_time` –≤ `ChildAccess`
- –ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ç–æ–∫–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è

---

### –í–∞—Ä–∏–∞–Ω—Ç 4: –í—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
**–û–ø–∏—Å–∞–Ω–∏–µ**: QR-–∫–æ–¥ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω —Ç–æ–ª—å–∫–æ –≤ —Ç–µ—á–µ–Ω–∏–µ –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—Å–ª–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1 —á–∞—Å).

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –í—ã—Å–æ–∫–∞—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —É–∫—Ä–∞–¥–µ–Ω–Ω–æ–≥–æ QR-–∫–æ–¥–∞
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã—Ö –≤—Ö–æ–¥–æ–≤

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- –ù—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å QR-–∫–æ–¥
- –ú–µ–Ω–µ–µ —É–¥–æ–±–Ω–æ –¥–ª—è —á–∞—Å—Ç–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ `qr_token_valid_from` –≤ `ChildAccess`
- –ü—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å `qr_token_valid_from = now()`
- –ü—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ç–æ–∫–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, —á—Ç–æ `now() - qr_token_valid_from < valid_duration`

---

### –í–∞—Ä–∏–∞–Ω—Ç 5: –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
**–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–æ–º–±–∏–Ω–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π.

**–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
- –û–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ + –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ (1 —á–∞—Å)
- –ò–õ–ò –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π (5 —Ä–∞–∑) + –≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ (24 —á–∞—Å–∞)
- –ò–õ–ò –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –≤—Ä–µ–º–µ–Ω–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è + –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–π

---

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è

–î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è **–í–∞—Ä–∏–∞–Ω—Ç 1 (–û–¥–Ω–æ—Ä–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ)** —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º **–≤—Ä–µ–º–µ–Ω–Ω—ã–º –æ–∫–Ω–æ–º (1 —á–∞—Å)**.

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏—Ç:
- ‚úÖ –í—ã—Å–æ–∫—É—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –¥–µ–π—Å—Ç–≤–∏—è

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –í—ã–±—Ä–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
2. –î–æ–±–∞–≤–∏—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è –≤ –º–æ–¥–µ–ª—å `ChildAccess`
3. –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è –ë–î
4. –û–±–Ω–æ–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ QR-–∫–æ–¥–∞
5. –û–±–Ω–æ–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞ –≤ `child_qr_login`

