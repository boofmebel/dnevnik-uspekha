"""
Роутер для юридических текстов
Согласно требованиям: простые тексты с юридическими аспектами РФ
"""
from fastapi import APIRouter
from schemas.legal import LegalTextResponse
from datetime import datetime

router = APIRouter()


@router.get("/terms", response_model=LegalTextResponse)
async def get_terms():
    """
    Пользовательское соглашение
    Простые слова с обязательными юридическими аспектами РФ
    """
    return LegalTextResponse(
        title="Пользовательское соглашение",
        content="""
# Пользовательское соглашение

## 1. Общие положения

1.1. Настоящее Пользовательское соглашение (далее — «Соглашение») регулирует отношения между администрацией сервиса «Дневник успеха» (далее — «Сервис») и пользователем (далее — «Пользователь»).

1.2. Использование Сервиса означает безоговорочное принятие Пользователем условий настоящего Соглашения.

1.3. Сервис предназначен для мотивации детей через систему виртуальных наград и игровых баллов. Сервис не предоставляет финансовых услуг и не гарантирует получение денежных средств.

## 2. Виртуальные награды и игровая валюта

2.1. Сервис использует систему виртуальных наград (звёзды, баллы) для мотивации детей.

2.2. Виртуальные награды являются игровыми элементами и не имеют денежной стоимости.

2.3. Родители могут по своему усмотрению конвертировать виртуальные награды в подарки или другие поощрения, но это не является обязательством Сервиса.

2.4. Сервис не обещает и не гарантирует получение денежных средств или финансовой выгоды.

## 3. Обработка персональных данных детей

3.1. Для использования Сервиса необходимо согласие родителей (законных представителей) на обработку персональных данных ребёнка в соответствии с Федеральным законом № 152-ФЗ «О персональных данных».

3.2. Согласие родителей оформляется отдельно и является обязательным условием использования Сервиса.

3.3. Родители имеют право в любой момент отозвать согласие на обработку персональных данных.

## 4. Ответственность

4.1. Сервис предоставляется «как есть», без каких-либо гарантий.

4.2. Администрация Сервиса не несёт ответственности за действия детей, совершенные с использованием Сервиса.

4.3. Родители несут полную ответственность за действия своих детей в Сервисе.

## 5. Изменения в Соглашении

5.1. Администрация Сервиса оставляет за собой право изменять настоящее Соглашение.

5.2. Изменения вступают в силу с момента публикации новой версии Соглашения.

5.3. Продолжение использования Сервиса после изменений означает принятие новой версии Соглашения.

Дата последнего обновления: {date}
Версия: 1.0
        """.strip().format(date=datetime.now().strftime("%d.%m.%Y")),
        last_updated=datetime.now().strftime("%d.%m.%Y"),
        version="1.0"
    )


@router.get("/privacy", response_model=LegalTextResponse)
async def get_privacy():
    """
    Политика конфиденциальности
    Простые слова с обязательными юридическими аспектами РФ
    """
    return LegalTextResponse(
        title="Политика конфиденциальности",
        content="""
# Политика конфиденциальности

## 1. Общие положения

1.1. Настоящая Политика конфиденциальности (далее — «Политика») определяет порядок обработки персональных данных в сервисе «Дневник успеха» (далее — «Сервис»).

1.2. Политика разработана в соответствии с Федеральным законом № 152-ФЗ «О персональных данных».

## 2. Персональные данные детей

2.1. Сервис обрабатывает персональные данные детей только с согласия их родителей (законных представителей).

2.2. К персональным данным относятся: имя ребёнка, возраст, пол, аватар, данные о выполненных задачах, виртуальных наградах и игровых достижениях.

2.3. Согласие родителей оформляется в электронном виде и хранится в системе с указанием даты, IP-адреса и других данных для аудита.

## 3. Цели обработки данных

3.1. Персональные данные обрабатываются исключительно для:
   - Предоставления функционала Сервиса (учёт задач, виртуальных наград, игровых достижений);
   - Улучшения работы Сервиса;
   - Обеспечения безопасности и предотвращения мошенничества.

3.2. Персональные данные не передаются третьим лицам без согласия родителей, за исключением случаев, предусмотренных законодательством РФ.

## 4. Права родителей

4.1. Родители имеют право:
   - Получать информацию об обработке персональных данных ребёнка;
   - Требовать исправления или удаления персональных данных;
   - Отозвать согласие на обработку персональных данных;
   - Подать жалобу в уполномоченный орган по защите прав субъектов персональных данных.

4.2. Для реализации прав необходимо обратиться в службу поддержки Сервиса.

## 5. Безопасность данных

5.1. Администрация Сервиса принимает необходимые технические и организационные меры для защиты персональных данных от неправомерного доступа, уничтожения, изменения или распространения.

5.2. Все действия с персональными данными логируются для обеспечения аудита и безопасности.

## 6. Хранение данных

6.1. Персональные данные хранятся в течение срока действия согласия родителей или до момента отзыва согласия.

6.2. После отзыва согласия персональные данные удаляются в течение 30 дней, за исключением данных, необходимых для выполнения обязательств перед пользователем.

Дата последнего обновления: {date}
Версия: 1.0
        """.strip().format(date=datetime.now().strftime("%d.%m.%Y")),
        last_updated=datetime.now().strftime("%d.%m.%Y"),
        version="1.0"
    )


@router.get("/subscription", response_model=LegalTextResponse)
async def get_subscription_terms():
    """
    Условия подписки
    Простые слова с обязательными юридическими аспектами РФ
    """
    return LegalTextResponse(
        title="Условия подписки",
        content="""
# Условия подписки

## 1. Общие положения

1.1. Подписка на сервис «Дневник успеха» (далее — «Подписка») предоставляет доступ к расширенному функционалу Сервиса.

1.2. Подписка является платной услугой и оплачивается родителями (законными представителями) детей.

1.3. Подписка не предоставляет финансовых услуг и не гарантирует получение денежных средств или финансовой выгоды.

## 2. Виртуальные награды и игровая валюта

2.1. Подписка не изменяет характер виртуальных наград и игровой валюты.

2.2. Виртуальные награды остаются игровыми элементами без денежной стоимости.

2.3. Родители могут по своему усмотрению конвертировать виртуальные награды в подарки, но это не является обязательством Сервиса.

2.4. Сервис не обещает и не гарантирует получение денежных средств или финансовой выгоды от использования виртуальных наград.

## 3. Согласие родителей

3.1. Оформление Подписки возможно только с согласия родителей (законных представителей).

3.2. Родители подтверждают, что понимают характер виртуальных наград и не ожидают получения денежных средств.

3.3. Все действия с Подпиской логируются для обеспечения прозрачности и аудита.

## 4. Оплата и возврат средств

4.1. Оплата Подписки производится в соответствии с тарифами, указанными на момент оформления.

4.2. Возврат средств возможен в течение 14 дней с момента оформления Подписки при условии, что услуга не была использована.

4.3. Запрос на возврат средств оформляется через специальный эндпоинт и требует подтверждения согласия родителя.

4.4. Возврат средств производится в течение 30 дней с момента одобрения запроса.

## 5. Отмена подписки

5.1. Родители могут отменить Подписку в любой момент через соответствующий эндпоинт.

5.2. При отмене Подписки доступ к расширенному функционалу прекращается в конце оплаченного периода.

5.3. Досрочная отмена не влечёт автоматического возврата средств, за исключением случаев, предусмотренных законодательством РФ.

## 6. Ответственность

6.1. Сервис предоставляется «как есть», без каких-либо гарантий относительно результатов использования.

6.2. Администрация Сервиса не несёт ответственности за ожидания пользователей относительно виртуальных наград или игровой валюты.

6.3. Родители несут полную ответственность за действия своих детей в Сервисе.

Дата последнего обновления: {date}
Версия: 1.0
        """.strip().format(date=datetime.now().strftime("%d.%m.%Y")),
        last_updated=datetime.now().strftime("%d.%m.%Y"),
        version="1.0"
    )

