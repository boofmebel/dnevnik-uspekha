<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Health Check - –î–Ω–µ–≤–Ω–∏–∫ —É—Å–ø–µ—Ö–∞</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .status {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }
    .status.ok {
      border-left: 4px solid #10b981;
    }
    .status.error {
      border-left: 4px solid #ef4444;
    }
    h1 {
      color: #1e293b;
      margin-bottom: 30px;
    }
    h2 {
      color: #475569;
      margin-top: 0;
      margin-bottom: 10px;
    }
    .check-item {
      padding: 10px;
      margin: 5px 0;
      background: #f8fafc;
      border-radius: 4px;
    }
    .check-item.ok::before {
      content: "‚úÖ ";
    }
    .check-item.error::before {
      content: "‚ùå ";
    }
    code {
      background: #e2e8f0;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
    }
  </style>
</head>
<body>
  <h1>üè• Health Check - –î–Ω–µ–≤–Ω–∏–∫ —É—Å–ø–µ—Ö–∞</h1>
  
  <div id="status-container">
    <div class="status">
      <h2>–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è...</h2>
      <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...</p>
    </div>
  </div>

  <script>
    const checks = {
      localStorage: false,
      jsonParse: false,
      errorHandler: false,
      appData: false
    };

    function updateStatus() {
      const container = document.getElementById('status-container');
      const allOk = Object.values(checks).every(v => v === true);
      
      let html = '<div class="status ' + (allOk ? 'ok' : 'error') + '">';
      html += '<h2>' + (allOk ? '‚úÖ –í—Å–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç' : '‚ùå –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã') + '</h2>';
      
      html += '<div class="check-item ' + (checks.localStorage ? 'ok' : 'error') + '">';
      html += 'localStorage: ' + (checks.localStorage ? '–î–æ—Å—Ç—É–ø–µ–Ω' : '–ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
      html += '</div>';
      
      html += '<div class="check-item ' + (checks.jsonParse ? 'ok' : 'error') + '">';
      html += 'JSON –ø–∞—Ä—Å–∏–Ω–≥: ' + (checks.jsonParse ? '–†–∞–±–æ—Ç–∞–µ—Ç' : '–û—à–∏–±–∫–∞');
      html += '</div>';
      
      html += '<div class="check-item ' + (checks.errorHandler ? 'ok' : 'error') + '">';
      html += '–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫: ' + (checks.errorHandler ? '–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞' : '–ù–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
      html += '</div>';
      
      html += '<div class="check-item ' + (checks.appData ? 'ok' : 'error') + '">';
      html += '–î–∞–Ω–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: ' + (checks.appData ? '–ó–∞–≥—Ä—É–∂–µ–Ω—ã' : '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏');
      html += '</div>';
      
      html += '</div>';
      
      html += '<div class="status">';
      html += '<h2>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ</h2>';
      html += '<div class="check-item">';
      html += 'User Agent: <code>' + navigator.userAgent + '</code>';
      html += '</div>';
      html += '<div class="check-item">';
      html += 'URL: <code>' + window.location.href + '</code>';
      html += '</div>';
      html += '<div class="check-item">';
      html += '–í—Ä–µ–º—è –ø—Ä–æ–≤–µ—Ä–∫–∏: <code>' + new Date().toISOString() + '</code>';
      html += '</div>';
      html += '</div>';
      
      container.innerHTML = html;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ localStorage
    try {
      localStorage.setItem('health-check', 'test');
      localStorage.removeItem('health-check');
      checks.localStorage = true;
    } catch (e) {
      checks.localStorage = false;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ JSON –ø–∞—Ä—Å–∏–Ω–≥–∞
    try {
      JSON.parse('{"test": true}');
      checks.jsonParse = true;
    } catch (e) {
      checks.jsonParse = false;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ errorHandler
    if (typeof window.errorHandler !== 'undefined' && window.errorHandler) {
      checks.errorHandler = true;
    }

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ appData (–µ—Å–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω)
    try {
      const saved = localStorage.getItem('responsibilityAppData');
      if (saved) {
        const parsed = JSON.parse(saved);
        if (parsed && typeof parsed === 'object') {
          checks.appData = true;
        }
      } else {
        checks.appData = true; // –ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö - —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ
      }
    } catch (e) {
      checks.appData = false;
    }

    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç—É—Å
    updateStatus();
  </script>
</body>
</html>

