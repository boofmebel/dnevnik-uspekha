# üéØ –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –∞–¥–º–∏–Ω–∫–µ - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

## ‚úÖ –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± (–µ—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –∞–∫–∫–∞—É–Ω—Ç)

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

```bash
ssh root@89.104.74.123
```

–ó–∞—Ç–µ–º –Ω–∞–π–¥–∏—Ç–µ —Å–ø–æ—Å–æ–± –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ PostgreSQL. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ:

```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1
psql -U postgres -d dnevnik_uspekha

# –í–∞—Ä–∏–∞–Ω—Ç 2 (–µ—Å–ª–∏ –Ω—É–∂–µ–Ω –ø–∞—Ä–æ–ª—å)
sudo -u postgres psql -d dnevnik_uspekha

# –í–∞—Ä–∏–∞–Ω—Ç 3 (–µ—Å–ª–∏ –±–∞–∑–∞ –≤ Docker)
docker exec -it <container_name> psql -U postgres -d dnevnik_uspekha
```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç–µ —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```sql
-- –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à email
UPDATE users SET role = 'admin' WHERE email = '–≤–∞—à_email@example.com';
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ

```sql
SELECT email, role FROM users WHERE email = '–≤–∞—à_email@example.com';
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å: `role = 'admin'`

### –®–∞–≥ 4: –í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω–∫—É

1. –û—Ç–∫—Ä–æ–π—Ç–µ: `http://89.104.74.123:3000`
2. –í–æ–π–¥–∏—Ç–µ —Å –≤–∞—à–∏–º email –∏ –ø–∞—Ä–æ–ª–µ–º
3. –û—Ç–∫—Ä–æ–π—Ç–µ: `http://89.104.74.123:3000/admin.html`

---

## üîê –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

### –®–∞–≥ 1: –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Ö–µ—à –ø–∞—Ä–æ–ª—è

**–í–∞—Ä–∏–∞–Ω—Ç A: –û–Ω–ª–∞–π–Ω –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä**
1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://bcrypt-generator.com/
2. –í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ö–µ—à (–Ω–∞–ø—Ä–∏–º–µ—Ä: `$2b$12$...`)

**–í–∞—Ä–∏–∞–Ω—Ç B: –õ–æ–∫–∞–ª—å–Ω–æ (–µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Python)**
```bash
pip install passlib[bcrypt]
python3 -c "from passlib.context import CryptContext; pwd_context = CryptContext(schemes=['bcrypt'], deprecated='auto'); print(pwd_context.hash('–≤–∞—à_–ø–∞—Ä–æ–ª—å'))"
```

### –®–∞–≥ 2: –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

(—Å–º. –®–∞–≥ 1 –≤—ã—à–µ)

### –®–∞–≥ 3: –°–æ–∑–¥–∞–π—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

```sql
INSERT INTO users (email, password_hash, role, created_at)
VALUES (
  'admin@dnevnik-uspekha.ru',
  '$2b$12$...',  -- –í—Å—Ç–∞–≤—å—Ç–µ —Ö–µ—à –∏–∑ —à–∞–≥–∞ 1
  'admin',
  NOW()
);
```

### –®–∞–≥ 4: –í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω–∫—É

(—Å–º. –®–∞–≥ 4 –≤—ã—à–µ)

---

## üîç –ö–∞–∫ –Ω–∞–π—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –±–∞–∑–µ

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ .env —Ñ–∞–π–ª

```bash
ssh root@89.104.74.123
cd /var/www/dnevnik-uspekha
find . -name '.env' -o -name '*.env' 2>/dev/null
cat .env | grep DATABASE
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é backend

```bash
ssh root@89.104.74.123
cd /var/www/dnevnik-uspekha
find . -name 'config.py' -path '*/core/*' 2>/dev/null
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Docker

```bash
ssh root@89.104.74.123
docker ps
docker inspect <container_name> | grep -i postgres
```

---

## üìã –ü—Ä–∏–º–µ—Ä—ã SQL –∫–æ–º–∞–Ω–¥

### –û–±–Ω–æ–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```sql
UPDATE users SET role = 'admin' WHERE email = 'user@example.com';
```

### –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:
```sql
INSERT INTO users (email, password_hash, role, created_at)
VALUES ('admin@example.com', '$2b$12$...', 'admin', NOW());
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤:
```sql
SELECT id, email, role, created_at FROM users WHERE role = 'admin';
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:
```sql
SELECT id, email, role FROM users ORDER BY created_at DESC;
```

---

## ‚ö†Ô∏è –ï—Å–ª–∏ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω–∞ –ª–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:**
   ```bash
   systemctl status postgresql
   # –∏–ª–∏
   docker ps | grep postgres
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–∞ –∫–∞–∫–æ–º –ø–æ—Ä—Ç—É —Ä–∞–±–æ—Ç–∞–µ—Ç PostgreSQL:**
   ```bash
   netstat -tlnp | grep 5432
   # –∏–ª–∏
   ss -tlnp | grep 5432
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
   ```bash
   journalctl -u postgresql -n 50
   # –∏–ª–∏
   docker logs <container_name>
   ```

---

## ‚úÖ –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

1. ‚úÖ –í–æ–π–¥–∏—Ç–µ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ: `http://89.104.74.123:3000`
2. ‚úÖ –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω–∫—É: `http://89.104.74.123:3000/admin.html`
3. ‚úÖ –î–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∞–¥–º–∏–Ω–∫–∏ —Å:
   - –¢—ë–º–Ω—ã–º –∑–∞–≥–æ–ª–æ–≤–∫–æ–º "üîê –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å"
   - –ù–∞–≤–∏–≥–∞—Ü–∏–µ–π: Dashboard, –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏, –î–µ—Ç–∏, –ü–æ–¥–ø–∏—Å–∫–∏, –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö

---

## üìû –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å?

–°–º. –¥—Ä—É–≥–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏:
- `docs/CREATE_ADMIN_NOW.md` - –ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- `docs/HOW_TO_GET_ADMIN_ACCESS.md` - –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
- `docs/ADMIN_TROUBLESHOOTING.md` - –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º



