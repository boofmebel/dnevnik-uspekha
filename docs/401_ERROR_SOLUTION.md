# ‚úÖ –†–µ—à–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ 401 - –ù–∞–π–¥–µ–Ω–Ω—ã–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

## üîç –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –°—Ç–∞—Ä—ã–µ —Ç–æ–∫–µ–Ω—ã –±–µ–∑ –ø–æ–ª—è "type"
**–û–ø–∏—Å–∞–Ω–∏–µ:** –¢–æ–∫–µ–Ω—ã, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ –¥–æ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—è "type", –Ω–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –ø—Ä–æ–≤–µ—Ä–∫—É.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –±–µ–∑ –ø–æ–ª—è "type" –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏.

**–ö–æ–¥:**
```python
# backend/core/security/jwt.py
if token_type_in_payload is None:
    logger.warning("Token has no type field, allowing for backward compatibility")
    return payload
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: SECRET_KEY –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
**–û–ø–∏—Å–∞–Ω–∏–µ:** –ï—Å–ª–∏ SECRET_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –ø–∞–¥–∞—Ç—å –∏–ª–∏ —Ç–æ–∫–µ–Ω—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ SECRET_KEY —Å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ–º –∏ –ø–æ–ø—ã—Ç–∫–æ–π –ø–æ–ª—É—á–∏—Ç—å –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è.

**–ö–æ–¥:**
```python
# backend/core/config.py
if not settings.SECRET_KEY:
    secret_key = os.getenv("SECRET_KEY")
    if secret_key:
        settings.SECRET_KEY = secret_key
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–ª–æ–∂–Ω–æ –ø–æ–Ω—è—Ç—å, –ø–æ—á–µ–º—É —Ç–æ–∫–µ–Ω –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫—É.

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:** ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —ç—Ç–∞–ø–æ–≤ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞.

## üöÄ –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –°–ï–ô–ß–ê–°

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SECRET_KEY –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /path/to/backend
cat .env | grep SECRET_KEY
```

–ï—Å–ª–∏ SECRET_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ –ø—É—Å—Ç–æ–π, –¥–æ–±–∞–≤—å—Ç–µ –≤ `.env`:
```
SECRET_KEY=–≤–∞—à-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á-–º–∏–Ω–∏–º—É–º-32-—Å–∏–º–≤–æ–ª–∞
```

### 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ backend —Å–µ—Ä–≤–µ—Ä

```bash
cd backend
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–∫—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å (Ctrl+C)
python run.py
```

### 3. –û—á–∏—Å—Ç–∏—Ç–µ —Å—Ç–∞—Ä—ã–π —Ç–æ–∫–µ–Ω –∏ –≤–æ–π–¥–∏—Ç–µ –∑–∞–Ω–æ–≤–æ

**–í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ (F12):**
```javascript
localStorage.removeItem('admin_token');
```

–ó–∞—Ç–µ–º:
1. –û—Ç–∫—Ä–æ–π—Ç–µ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É: `http://89.104.74.123:3000`
2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
3. –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å: `http://89.104.74.123:3000/admin.html`

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ backend –∏ –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–π—Ç–∏ –≤ –∞–¥–º–∏–Ω–∫—É, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend. –î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è:

**–ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –≤–∞–ª–∏–¥–Ω—ã–π:**
```
=== TOKEN VERIFICATION START ===
Token preview: eyJhbGciOiJIUzI1NiIsInR5cCI6Ik...
‚úÖ Token decoded successfully with signature verification
=== TOKEN VERIFICATION SUCCESS ===
```

**–ï—Å–ª–∏ —Ç–æ–∫–µ–Ω –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π:**
```
‚ùå Invalid token signature! SECRET_KEY mismatch
–∏–ª–∏
‚ö†Ô∏è Token is EXPIRED!
```

## üìã –ß–µ–∫-–ª–∏—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –±–µ–∑ –ø–æ–ª—è "type"
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ SECRET_KEY
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π —ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/debug/token`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## üéØ –ì–ª–∞–≤–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–∫–∏

–°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –ø—Ä–æ–±–ª–µ–º–∞ –≤ –æ–¥–Ω–æ–º –∏–∑:
1. **SECRET_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ –∏–∑–º–µ–Ω–∏–ª—Å—è** - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `.env` —Ñ–∞–π–ª
2. **–¢–æ–∫–µ–Ω –∏—Å—Ç–µ–∫** - –≤–æ–π–¥–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
3. **–°—Ç–∞—Ä—ã–π —Ç–æ–∫–µ–Ω –±–µ–∑ –ø–æ–ª—è "type"** - —Ç–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è

## ‚úÖ –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —à–∞–≥–æ–≤:
1. Backend –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω ‚úÖ
2. SECRET_KEY —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω ‚úÖ
3. –í–æ–π–¥–∏—Ç–µ –∑–∞–Ω–æ–≤–æ ‚úÖ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend ‚úÖ

–û—à–∏–±–∫–∞ 401 –¥–æ–ª–∂–Ω–∞ –∏—Å—á–µ–∑–Ω—É—Ç—å!

