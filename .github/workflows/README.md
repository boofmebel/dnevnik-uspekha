# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Actions –¥–ª—è –¥–µ–ø–ª–æ—è

## üìã –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ SSH –∫–ª—é—á–∞

–ù–∞ –≤–∞—à–µ–º –ª–æ–∫–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:

```bash
# –ï—Å–ª–∏ —É –≤–∞—Å –µ—â–µ –Ω–µ—Ç SSH –∫–ª—é—á–∞
ssh-keygen -t ed25519 -C "github-actions-deploy"

# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ü–£–ë–õ–ò–ß–ù–´–ô –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh-copy-id -i ~/.ssh/id_ed25519.pub user@your-server.com

# –ò–ª–∏ –≤—Ä—É—á–Ω—É—é –¥–æ–±–∞–≤—å—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ ~/.ssh/id_ed25519.pub –≤ ~/.ssh/authorized_keys –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
```

**–í–∞–∂–Ω–æ:** –î–ª—è GitHub Actions –Ω—É–∂–µ–Ω –ü–†–ò–í–ê–¢–ù–´–ô –∫–ª—é—á (id_ed25519 –±–µ–∑ .pub)

## üìã –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Secrets –≤ GitHub

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–∞—à —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ GitHub
2. Settings ‚Üí Secrets and variables ‚Üí Actions
3. –ù–∞–∂–º–∏—Ç–µ "New repository secret"
4. –î–æ–±–∞–≤—å—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å–µ–∫—Ä–µ—Ç—ã:

### SERVER_HOST
- Name: `SERVER_HOST`
- Value: IP –∞–¥—Ä–µ—Å –∏–ª–∏ –¥–æ–º–µ–Ω –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `192.168.1.100` –∏–ª–∏ `myserver.com`)

### SERVER_USER
- Name: `SERVER_USER`
- Value: –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è SSH (–Ω–∞–ø—Ä–∏–º–µ—Ä: `root` –∏–ª–∏ `deploy`)

### SERVER_SSH_KEY
- Name: `SERVER_SSH_KEY`
- Value: –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ü–†–ò–í–ê–¢–ù–û–ì–û –∫–ª—é—á–∞ (id_ed25519)
  ```bash
  cat ~/.ssh/id_ed25519
  ```
  –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤–µ—Å—å –≤—ã–≤–æ–¥, –≤–∫–ª—é—á–∞—è `-----BEGIN OPENSSH PRIVATE KEY-----` –∏ `-----END OPENSSH PRIVATE KEY-----`

### SERVER_PATH (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
- Name: `SERVER_PATH`
- Value: –ü–æ–ª–Ω—ã–π –ø—É—Ç—å –∫ –ø—Ä–æ–µ–∫—Ç—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: `/var/www/dnevnik-uspekha`)

### SERVER_PORT (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- Name: `SERVER_PORT`
- Value: –ü–æ—Ä—Ç SSH (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 22, –º–æ–∂–Ω–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å)

## üìã –®–∞–≥ 3: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

–ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:

```bash
# –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞
mkdir -p /var/www/dnevnik-uspekha
cd /var/www/dnevnik-uspekha

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–¥–µ–ª–∞–Ω–æ)
git init
git remote add origin https://github.com/–í–ê–®_USERNAME/–ù–ê–ó–í–ê–ù–ò–ï_–†–ï–ü–û–ó–ò–¢–û–†–ò–Ø.git

# –ò–ª–∏ –∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/–í–ê–®_USERNAME/–ù–ê–ó–í–ê–ù–ò–ï_–†–ï–ü–û–ó–ò–¢–û–†–ò–Ø.git .

# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω git
# sudo apt-get install git  # –¥–ª—è Ubuntu/Debian
# sudo yum install git       # –¥–ª—è CentOS/RHEL
```

## üìã –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ –Ω–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é
sudo chown -R $USER:$USER /var/www/dnevnik-uspekha
chmod -R 755 /var/www/dnevnik-uspekha
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

1. –°–¥–µ–ª–∞–π—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ
2. –ó–∞–∫–æ–º–º–∏—Ç—å—Ç–µ –∏ –∑–∞–ø—É—à—å—Ç–µ –≤ `main`:
   ```bash
   git checkout main
   git merge dev
   git push origin main
   ```
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ GitHub ‚Üí Actions
4. –í—ã —É–≤–∏–¥–∏—Ç–µ –∑–∞–ø—É—â–µ–Ω–Ω—ã–π workflow "Deploy to Server"
5. –ï—Å–ª–∏ –≤—Å—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –¥–µ–ø–ª–æ–π –ø—Ä–æ–π–¥–µ—Ç —É—Å–ø–µ—à–Ω–æ ‚úÖ

## üîß –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

–ï—Å–ª–∏ –≤–∞—à –ø—Ä–æ–µ–∫—Ç —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —à–∞–≥–æ–≤ (npm install, build –∏ —Ç.–¥.), 
–æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `.github/workflows/deploy.yml` –∏ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ –Ω—É–∂–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏.

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –û—à–∏–±–∫–∞ "Permission denied"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ SSH –∫–ª—é—á –¥–æ–±–∞–≤–ª–µ–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞

### –û—à–∏–±–∫–∞ "git: command not found"
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ git –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ: `sudo apt-get install git`

### –û—à–∏–±–∫–∞ "No such file or directory"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –ø—É—Ç—å –≤ `SERVER_PATH` –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

